<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image Processing Report</title>
    <style>

    .responsive-iframe {
        width: 70vw;
        height: 70vh;
        border: none;
    }

    code, .backtick-code {
        font-family: Consolas, "Courier New", monospace;
        background-color: #464646;
        border: 0px solid #000000;
        padding: 2px 4px;
        border-radius: 4px;
        color: #ffffff;
        font-size: 90%;
    }

    video {
        max-width: 50%;
        max-height: 100%;
        flex: 1;
    }

    .backtick-code::before, .backtick-code::after {
        content: "`";
        color: #555;
    }

    .box {
        border: 1px solid white;
        padding: 10px;
        margin-bottom: 10px;
    }

    body {
        font-family: "Times New Roman", sans-serif;
        line-height: 1.6;
        margin: 20px;
        background-color: #050505;
        color: #ababab;
        font-size: 12px;
    }

    h1, h2, h3, h4 {
    }

    p {
        text-align: justify;
        margin-top: 0.5em;
        margin-bottom: 1.5em;
    }

    img {
        width: 50%;
        height: auto;
        margin-bottom: 0.5em;
        display: block;
    }

    .img2 {
        width: 80%;
        height: auto;
        margin-bottom: 0.5em;
        display: block;
    }

    .img3 {
        width: 50%;
        height: auto;
        margin-bottom: 0.5em;
        display: block;
    }

    .img4 {
        width: 20%;
        height: auto;
        margin-bottom: 0.5em;
        display: block;
    }

    .img5, .image-row2 video {
        width: 33%;
        height: auto;
        max-height: 100%;
        object-fit: cover;
    }


    .collapsible {
        background-color: #111111;
        color: grey;
        cursor: pointer;
        padding: 10px;
        width: 100%;
        border: none;
        text-align: left;
        outline: none;
        font-size: 12px;
        margin-bottom: 10px;
        position: relative;
    }

    .active, .collapsible:hover {
        background-color: #464646;
        color: #ababab;
    }

    .content {
        padding: 20px;
        display: none;
        overflow: hidden;
        background-color: #151515;
    }

    .collapsible::after {
        content: '';
        position: absolute;
        top: -2px;
        left: -2px;
        right: -2px;
        bottom: -2px;
        border: 1px solid;
        border-radius: 4px;
    }

    .image-row {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
    }

    .image-row img {
        width: 20%;
        height: auto;
        object-fit: contain;
    }

    .image-row2 {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
    }

    .image-row2 img {
        width: 10%;
        height: auto;
        object-fit: contain;
    }

    .image-row3 {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
    }

    .image-row3 img {
        width: 40%;
        height: auto;
        object-fit: contain;
    }

    #image-container {
        width: 100%;
        height: 80vh;
        position: relative;
        overflow: hidden;
        cursor: grab;
        margin-bottom: 1.5em;
        border: 1px solid #ababab;
    }

    #image-container:active {
        cursor: grabbing;
    }

    #design-image {
        user-select: none;
        -webkit-user-drag: none;
        position: absolute;
        top: 0;
        left: 0;
        transform-origin: 0 0;
    }

</style>

    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
            tex2jax: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']],
                processEscapes: true
            }
        });
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-AMS_HTML-full"></script>
</head>
<body>

<h1>CS180 Project 5 -- Ryan Nader -- Part A + B</h1>

<p>github: https://github.com/berkeleybear22ryan/CS180_Project5</p>
<p>website: https://berkeleybear22ryan.github.io/CS180_Project5/</p>
<p>for `PART A` ...</p>
<p>IMPORTANT: for all of `PART A` I used the `seed=180`</p>
<p>this is all from the file `180_proj5A_starter.ipynb` and just following the instructions on this</p>
<button class="collapsible">Part 0: Setup -- done</button>
<div class="content">
    <div class="box">
        <p>for this part there are 3 prompts that were used for the corresponding images each with varying amounts of `num_inference_steps`</p>
        <p>Here we use the DeepFloyd IF diffusion model. DeepFloyd is a two stage model trained by Stability AI. The first stage produces images of size 64×64 and the second stage takes the outputs of the first stage and generates images of size 256×256</p>
        <p>prompts are ...</p>
        <p>1. `an oil painting of a snowy mountain village`</p>
        <p>2. `a man wearing a hat`</p>
        <p>3. `a rocket ship`</p>
        <p>and each has `num_inference_steps=10` or `num_inference_steps=50` or `num_inference_steps=200`</p>
    </div>

    <div class="box">
        <p>here are the ones associated with `an oil painting of a snowy mountain village`</p>
        <p>`num_inference_steps=10`</p>
        <div class="image-row">
            <img src="./partA/part0/1_num_inference_steps=10.png" alt="IMG_6407">
        </div>
        <p>`num_inference_steps=50`</p>
        <div class="image-row">
            <img src="./partA/part0/1_num_inference_steps=50.png" alt="IMG_6407">
        </div>
        <p>`num_inference_steps=200`</p>
        <div class="image-row">
            <img src="./partA/part0/1_num_inference_steps=200.png" alt="IMG_6407">
        </div>
    </div>


    <div class="box">
        <p>here are the ones associated with `a man wearing a hat`</p>
        <p>`num_inference_steps=10`</p>
        <div class="image-row">
            <img src="./partA/part0/2_num_inference_steps=10.png" alt="IMG_6407">
        </div>
        <p>`num_inference_steps=50`</p>
        <div class="image-row">
            <img src="./partA/part0/2_num_inference_steps=50.png" alt="IMG_6407">
        </div>
        <p>`num_inference_steps=200`</p>
        <div class="image-row">
            <img src="./partA/part0/2_num_inference_steps=200.png" alt="IMG_6407">
        </div>
    </div>

    <div class="box">
        <p>here are the ones associated with `a rocket ship`</p>
        <p>`num_inference_steps=10`</p>
        <div class="image-row">
            <img src="./partA/part0/3_num_inference_steps=10.png" alt="IMG_6407">
        </div>
        <p>`num_inference_steps=50`</p>
        <div class="image-row">
            <img src="./partA/part0/3_num_inference_steps=50.png" alt="IMG_6407">
        </div>
        <p>`num_inference_steps=200`</p>
        <div class="image-row">
            <img src="./partA/part0/3_num_inference_steps=200.png" alt="IMG_6407">
        </div>
    </div>
    <div class="box">
        <p>Answer to briefly reflect on the quality of the outputs and their relationships to the text prompts.</p>
        <p>Increasing `num_inference_steps` tends to significantly improves the image quality, detail, and alignment with the text prompt. At lower steps, the images are vague and underdeveloped, while higher steps lead to more refined and accurate outputs.</p>
    </div>

</div>

<p>Part 1: Sampling Loops</p>
<button class="collapsible">Part 1.1: Implementing the forward process -- done</button>
<div class="content">
    <div class="box">
        <p>so we are working with the image ...</p>
        <div class="image-row">
            <img src="./partA/part1/0_setup/download.png" alt="IMG_6407">
        </div>
        <p>now we use the formula: $x_t=\sqrt{\bar{\alpha}_t} x_0+\sqrt{1-\bar{\alpha}_t} \epsilon \quad$ where $\epsilon \sim N(0,1)$ to get the noised image $x_t$</p>
        <p>here they want deliverables ...</p>
        <p>Implement the im_noisy = forward(im, t) function</p>
        <p>Show the test image at noise level [250, 500, 750]</p>
        <p>I implemented the function and include the results below</p>
        <p>We have a test image (64x64x3 image of the Campanile) and apply noise to it (lower timestep is closer to original image and higher timestep is closer to pure noise)</p>
        <p>`t=250`, `t=500`, `t=750`</p>
        <div class="image-row">
            <img src="./partA/part1/1.1/250.png" alt="IMG_6407">
            <img src="./partA/part1/1.1/500.png" alt="IMG_6407">
            <img src="./partA/part1/1.1/750.png" alt="IMG_6407">
        </div>
    </div>
</div>

<button class="collapsible">Part 1.2: Classical Denoising -- done</button>
<div class="content">
    <div class="box">
        <p>so we are working with the image ...</p>
        <div class="image-row">
            <img src="./partA/part1/0_setup/download.png" alt="IMG_6407">
        </div>
        <p>here they want deliverables ...</p>
        <p>For each of the 3 noisy test images from the previous part, show your best Gaussian-denoised version side by side.</p>
        <p>results below ...</p>
        <p>here we use Gaussian blurring, to eliminate the noise from the image and we get substandard results:</p>
        <p>We have a test image (64x64x3 image of the Campanile) and apply noise to it (lower timestep is closer to original image and higher timestep is closer to pure noise) along with the classic denoise attempt for each one below</p>
        <p>`t=250`, `t=500`, `t=750`</p>
        <div class="image-row">
            <img src="./partA/part1/1.1/250.png" alt="IMG_6407">
            <img src="./partA/part1/1.1/500.png" alt="IMG_6407">
            <img src="./partA/part1/1.1/750.png" alt="IMG_6407">
        </div>
        <div class="image-row">
            <img src="./partA/part1/1.2/250.png" alt="IMG_6407">
            <img src="./partA/part1/1.2/500.png" alt="IMG_6407">
            <img src="./partA/part1/1.2/750.png" alt="IMG_6407">
        </div>
    </div>
</div>


<button class="collapsible">Part 1.3: Implementing One Step Denoising -- done</button>
<div class="content">
    <div class="box">
        <p>so we are working with the image ...</p>
        <div class="image-row">
            <img src="./partA/part1/0_setup/download.png" alt="IMG_6407">
        </div>
        <p>here they want deliverables ...</p>
        <p>For the 3 noisy images from 1.2 (t = [250, 500, 750]):</p>
        <p>Using the UNet, denoise the image by estimating the noise.</p>
        <p>Estimate the noise in the new noisy image, by passing it through stage_1.unet</p>
        <p>Remove the noise from the noisy image to obtain an estimate of the original image.</p>
        <p>Visualize the original image, the noisy image, and the estimate of the original image</p>
        <p> we can write the equation for $x_0$ as $\hat{x}_0=\frac{x_t-\sqrt{1-\bar{\alpha}_t} \hat{\epsilon}}{\sqrt{\bar{\alpha}_t}}$</p>
        <p>results below ...</p>
        <p>here we use Gaussian blurring, to eliminate the noise from the image and we get substandard results:</p>
        <p>We have a test image (64x64x3 image of the Campanile) and apply noise to it (lower timestep is closer to original image and higher timestep is closer to pure noise) along with the one step denoise attempt for each one below</p>
        <p>`t=250`, `t=500`, `t=750`</p>
        <div class="image-row">
            <img src="./partA/part1/1.1/250.png" alt="IMG_6407">
            <img src="./partA/part1/1.1/500.png" alt="IMG_6407">
            <img src="./partA/part1/1.1/750.png" alt="IMG_6407">
        </div>
        <div class="image-row">
            <img src="./partA/part1/1.3/250.png" alt="IMG_6407">
            <img src="./partA/part1/1.3/500.png" alt="IMG_6407">
            <img src="./partA/part1/1.3/750.png" alt="IMG_6407">
        </div>
    </div>
</div>


<button class="collapsible">Part 1.4: Implementing Iterative Denoising -- done</button>
<div class="content">
    <div class="box">
        <p>so we are working with the image ...</p>
        <div class="image-row">
            <img src="./partA/part1/0_setup/download.png" alt="IMG_6407">
        </div>
        <p>here we are iteratively denoise towards $x_0$ rather than just doing it in one step.</p>
        <p>We start with a noisy image and then use the following formula to get the image at the previous timestep which should be less noisy each time.</p>
        <p>thus we have the formula ... $x_{t^{\prime}}=\frac{\sqrt{\bar{\alpha}^{\prime}} \beta_t}{1-\bar{\alpha}_t} x_0+\frac{\sqrt{\alpha_t}\left(1-\bar{\alpha}_{t^{\prime}}\right)}{1-\bar{\alpha}_t} x_t+v_\sigma$</p>
        <p>now the iterative results look like this ...</p>
        <p>this meets the requirement of Show the noisy image every 5th loop of denoising (it should gradually become less noisy)</p>
        <div class="image-row">
            <img src="./partA/part1/1.4/660.png" alt="IMG_6407">
            <img src="./partA/part1/1.4/510.png" alt="IMG_6407">
            <img src="./partA/part1/1.4/360.png" alt="IMG_6407">
            <img src="./partA/part1/1.4/210.png" alt="IMG_6407">
            <img src="./partA/part1/1.4/60.png" alt="IMG_6407">
            <img src="./partA/part1/1.4/0.png" alt="IMG_6407">
        </div>
        <p>and now will meet the requirement to show the final predicted clean image, using iterative denoising</p>
        <div class="image-row">
            <img src="./partA/part1/1.4/0.png" alt="IMG_6407">
        </div>
        <p>and now will ... Show the predicted clean image using only a single denoising step, as was done in the previous part. This should look much worse.</p>
        <div class="image-row">
            <img src="./partA/part1/1.3/250.png" alt="IMG_6407">
            <img src="./partA/part1/1.3/500.png" alt="IMG_6407">
            <img src="./partA/part1/1.3/750.png" alt="IMG_6407">
        </div>
        <p>and now will show the predicted clean image using gaussian blurring, as was done in part 1.2.</p>
        <div class="image-row">
            <img src="./partA/part1/1.2/250.png" alt="IMG_6407">
            <img src="./partA/part1/1.2/500.png" alt="IMG_6407">
            <img src="./partA/part1/1.2/750.png" alt="IMG_6407">
        </div>
        <p>and as can be seen fron this the iterative denoising one is the best so far</p>
    </div>
</div>



<button class="collapsible">Part 1.5: Diffusion Model Sampling -- done</button>
<div class="content">
    <div class="box">
        <p>Here the deliverables are to show 5 sampled images</p>
        <p>this is iterative denoising from pure, random noise to generate images based on prompt `a high quality photo`</p>
        <div class="image-row">
            <img src="./partA/part1/1.5/1.png" alt="IMG_6407">
            <img src="./partA/part1/1.5/2.png" alt="IMG_6407">
            <img src="./partA/part1/1.5/3.png" alt="IMG_6407">
            <img src="./partA/part1/1.5/4.png" alt="IMG_6407">
            <img src="./partA/part1/1.5/5.png" alt="IMG_6407">
        </div>
    </div>

</div>



<button class="collapsible">Part 1.6: Classifier Free Guidance -- done</button>
<div class="content">
    <div class="box">
        <p>now for this part they want ...</p>
        <p>Implement the `iterative_denoise_cfg` function</p>
        <p>Show 5 images of `a high quality photo` with a CFG scale of $\gamma = 7$</p>
        <p>and we now have new noise estimate of $\epsilon=\epsilon_u+\gamma\left(\epsilon_c-\epsilon_u\right)$</p>
        <div class="image-row">
            <img src="./partA/part1/1.6/1.png" alt="IMG_6407">
            <img src="./partA/part1/1.6/2.png" alt="IMG_6407">
            <img src="./partA/part1/1.6/3.png" alt="IMG_6407">
            <img src="./partA/part1/1.6/4.png" alt="IMG_6407">
            <img src="./partA/part1/1.6/5.png" alt="IMG_6407">
        </div>
    </div>
</div>

<button class="collapsible">Part 1.7: Image-to-image Translation  -- done</button>
<div class="content">
    <div class="box">
        <p>Here they want Edits of the test image, using the given prompt at noise levels [1, 3, 5, 7, 10, 20] with text prompt "a high quality photo"</p>
        <p>and ... Edits of 2 of your own test images, using the same procedure.</p>
        <p>so here we have the images ...</p>
        <p>test image</p>
        <div class="image-row">
            <img src="./partA/part1/1.7/campanile.jpg" alt="IMG_6407">
        </div>
        <p>then the 6 images at 1,3,5,7,10,20 are ...</p>
        <div class="image-row">
            <img src="./partA/part1/1.7/c/1.png" alt="IMG_6407">
            <img src="./partA/part1/1.7/c/3.png" alt="IMG_6407">
            <img src="./partA/part1/1.7/c/5.png" alt="IMG_6407">
            <img src="./partA/part1/1.7/c/7.png" alt="IMG_6407">
            <img src="./partA/part1/1.7/c/10.png" alt="IMG_6407">
            <img src="./partA/part1/1.7/c/20.png" alt="IMG_6407">
        </div>

        <p>custom image 1</p>
        <div class="image-row">
            <img src="./partA/part1/1.7/custom_image1.jpg" alt="IMG_6407">
        </div>
        <p>then the 6 images at 1,3,5,7,10,20 are ...</p>
        <div class="image-row">
            <img src="./partA/part1/1.7/1/1.png" alt="IMG_6407">
            <img src="./partA/part1/1.7/1/3.png" alt="IMG_6407">
            <img src="./partA/part1/1.7/1/5.png" alt="IMG_6407">
            <img src="./partA/part1/1.7/1/7.png" alt="IMG_6407">
            <img src="./partA/part1/1.7/1/10.png" alt="IMG_6407">
            <img src="./partA/part1/1.7/1/20.png" alt="IMG_6407">
        </div>

        <p>custom image 2</p>
        <div class="image-row">
            <img src="./partA/part1/1.7/custom_image2.jpg" alt="IMG_6407">
        </div>
        <p>then the 6 images at 1,3,5,7,10,20 are ...</p>
        <div class="image-row">
            <img src="./partA/part1/1.7/2/1.png" alt="IMG_6407">
            <img src="./partA/part1/1.7/2/3.png" alt="IMG_6407">
            <img src="./partA/part1/1.7/2/5.png" alt="IMG_6407">
            <img src="./partA/part1/1.7/2/7.png" alt="IMG_6407">
            <img src="./partA/part1/1.7/2/10.png" alt="IMG_6407">
            <img src="./partA/part1/1.7/2/20.png" alt="IMG_6407">
        </div>

    </div>
</div>



<button class="collapsible">Part 1.7.1: Editing Hand-Drawn and Web Images -- done</button>
<div class="content">
    <div class="box">
        <p>so for this part they want ... </p>
        <p>1 image from the web of your choice, edited using the above method for noise levels [1, 3, 5, 7, 10, 20] (and whatever additional noise levels you want)</p>
        <p>2 hand drawn images, edited using the above method for noise levels [1, 3, 5, 7, 10, 20] (and whatever additional noise levels you want)</p>
        <p> I will provide them in the order original, then below that will be side by side 1,3,5,7,10,20</p>
        <p>now the reference image they give is as follows ...</p>
        <div class="image-row">
            <img src="./partA/part1/1.7.1/1/start.png" alt="IMG_6407">
        </div>
        <p>and the generated images are ...</p>
        <div class="image-row">
            <img src="./partA/part1/1.7.1/1/1.png" alt="IMG_6407">
            <img src="./partA/part1/1.7.1/1/3.png" alt="IMG_6407">
            <img src="./partA/part1/1.7.1/1/5.png" alt="IMG_6407">
            <img src="./partA/part1/1.7.1/1/7.png" alt="IMG_6407">
            <img src="./partA/part1/1.7.1/1/10.png" alt="IMG_6407">
            <img src="./partA/part1/1.7.1/1/20.png" alt="IMG_6407">
        </div>

        <p>a web drawn image is as follows ...</p>
        <div class="image-row">
            <img src="./partA/part1/1.7.1/2/start.jpg" alt="IMG_6407">
        </div>
        <p>and the generated images are ...</p>
        <div class="image-row">
            <img src="./partA/part1/1.7.1/2/1.png" alt="IMG_6407">
            <img src="./partA/part1/1.7.1/2/3.png" alt="IMG_6407">
            <img src="./partA/part1/1.7.1/2/5.png" alt="IMG_6407">
            <img src="./partA/part1/1.7.1/2/7.png" alt="IMG_6407">
            <img src="./partA/part1/1.7.1/2/10.png" alt="IMG_6407">
            <img src="./partA/part1/1.7.1/2/20.png" alt="IMG_6407">
        </div>


        <p>first hand drawn image using drawing board is as follows ...</p>
        <div class="image-row">
            <img src="./partA/part1/1.7.1/4/start.png" alt="IMG_6407">
        </div>
        <p>and the generated images are ...</p>
        <div class="image-row">
            <img src="./partA/part1/1.7.1/4/1.png" alt="IMG_6407">
            <img src="./partA/part1/1.7.1/4/3.png" alt="IMG_6407">
            <img src="./partA/part1/1.7.1/4/5.png" alt="IMG_6407">
            <img src="./partA/part1/1.7.1/4/7.png" alt="IMG_6407">
            <img src="./partA/part1/1.7.1/4/10.png" alt="IMG_6407">
            <img src="./partA/part1/1.7.1/4/20.png" alt="IMG_6407">
        </div>


        <p>second hand drawn image using drawing board is as follows ...</p>
        <div class="image-row">
            <img src="./partA/part1/1.7.1/5/start.png" alt="IMG_6407">
        </div>
        <p>and the generated images are ...</p>
        <div class="image-row">
            <img src="./partA/part1/1.7.1/5/1.png" alt="IMG_6407">
            <img src="./partA/part1/1.7.1/5/3.png" alt="IMG_6407">
            <img src="./partA/part1/1.7.1/5/5.png" alt="IMG_6407">
            <img src="./partA/part1/1.7.1/5/7.png" alt="IMG_6407">
            <img src="./partA/part1/1.7.1/5/10.png" alt="IMG_6407">
            <img src="./partA/part1/1.7.1/5/20.png" alt="IMG_6407">
        </div>


        <p>a drawing that I drew on paper is as follows</p>
        <div class="image-row">
            <img src="./partA/part1/1.7.1/3/start.png" alt="IMG_6407">
        </div>
        <p>and the generated images are ...</p>
        <div class="image-row">
            <img src="./partA/part1/1.7.1/3/1.png" alt="IMG_6407">
            <img src="./partA/part1/1.7.1/3/3.png" alt="IMG_6407">
            <img src="./partA/part1/1.7.1/3/5.png" alt="IMG_6407">
            <img src="./partA/part1/1.7.1/3/7.png" alt="IMG_6407">
            <img src="./partA/part1/1.7.1/3/10.png" alt="IMG_6407">
            <img src="./partA/part1/1.7.1/3/20.png" alt="IMG_6407">
        </div>

    </div>
</div>

<button class="collapsible">Part 1.7.2: Inpainting -- done</button>
<div class="content">
    <div class="box">
        <p>so for this part they want ...</p>
        <p>A properly implemented inpaint function</p>
        <p>I will give them in the order original image, mask, to replace, inpainted</p>
        <p>The test image inpainted (feel free to use your own mask)</p>
        <div class="image-row">
            <img src="./partA/part1/1.7.2/1/image.png" alt="IMG_6407">
            <img src="./partA/part1/1.7.2/1/mask.png" alt="IMG_6407">
            <img src="./partA/part1/1.7.2/1/to_replace.png" alt="IMG_6407">
            <img src="./partA/part1/1.7.2/1/inpainted.png" alt="IMG_6407">
        </div>
        <p>1/2 of your own images edited (with different mask)</p>
        <div class="image-row">
            <img src="./partA/part1/1.7.2/2/image.png" alt="IMG_6407">
            <img src="./partA/part1/1.7.2/2/mask.png" alt="IMG_6407">
            <img src="./partA/part1/1.7.2/2/to_replace.png" alt="IMG_6407">
            <img src="./partA/part1/1.7.2/2/inpainted.png" alt="IMG_6407">
        </div>

        <p>2/2 of your own images edited (with different mask)</p>
        <div class="image-row">
            <img src="./partA/part1/1.7.2/3/image.png" alt="IMG_6407">
            <img src="./partA/part1/1.7.2/3/mask.png" alt="IMG_6407">
            <img src="./partA/part1/1.7.2/3/to_replace.png" alt="IMG_6407">
            <img src="./partA/part1/1.7.2/3/inpainted.png" alt="IMG_6407">
        </div>
    </div>
</div>






<button class="collapsible">Part 1.7.3: Text-Conditioned Image-to-image Translation -- done</button>
<div class="content">
    <div class="box">
        <p>so for this part they want ...</p>
        <p>all of them will be in the order image, mask, to_replace, 1, 3, 5, 7, 10, 20</p>
        <p>Edits of the test image, using the given prompt at noise levels [1, 3, 5, 7, 10, 20]</p>
        <p>here the is prompt `a rocket ship`</p>
        <div class="image-row">
            <img src="./partA/part1/1.7.3/1/image.png" alt="IMG_6407">
            <img src="./partA/part1/1.7.3/1/mask.png" alt="IMG_6407">
            <img src="./partA/part1/1.7.3/1/to_replace.png" alt="IMG_6407">
            <img src="./partA/part1/1.7.3/1/1.png" alt="IMG_6407">
            <img src="./partA/part1/1.7.3/1/3.png" alt="IMG_6407">
            <img src="./partA/part1/1.7.3/1/5.png" alt="IMG_6407">
            <img src="./partA/part1/1.7.3/1/7.png" alt="IMG_6407">
            <img src="./partA/part1/1.7.3/1/10.png" alt="IMG_6407">
            <img src="./partA/part1/1.7.3/1/20.png" alt="IMG_6407">
        </div>

        <p>here the is prompt on another image `a photo of a dog`</p>
        <div class="image-row">
            <img src="./partA/part1/1.7.3/2/image.png" alt="IMG_6407">
            <img src="./partA/part1/1.7.3/2/mask.png" alt="IMG_6407">
            <img src="./partA/part1/1.7.3/2/to_replace.png" alt="IMG_6407">
            <img src="./partA/part1/1.7.3/2/1.png" alt="IMG_6407">
            <img src="./partA/part1/1.7.3/2/3.png" alt="IMG_6407">
            <img src="./partA/part1/1.7.3/2/5.png" alt="IMG_6407">
            <img src="./partA/part1/1.7.3/2/7.png" alt="IMG_6407">
            <img src="./partA/part1/1.7.3/2/10.png" alt="IMG_6407">
            <img src="./partA/part1/1.7.3/2/20.png" alt="IMG_6407">
        </div>

        <p>here the is prompt on another image `a pencil`</p>
        <div class="image-row">
            <img src="./partA/part1/1.7.3/3/image.png" alt="IMG_6407">
            <img src="./partA/part1/1.7.3/3/mask.png" alt="IMG_6407">
            <img src="./partA/part1/1.7.3/3/to_replace.png" alt="IMG_6407">
            <img src="./partA/part1/1.7.3/3/1.png" alt="IMG_6407">
            <img src="./partA/part1/1.7.3/3/3.png" alt="IMG_6407">
            <img src="./partA/part1/1.7.3/3/5.png" alt="IMG_6407">
            <img src="./partA/part1/1.7.3/3/7.png" alt="IMG_6407">
            <img src="./partA/part1/1.7.3/3/10.png" alt="IMG_6407">
            <img src="./partA/part1/1.7.3/3/20.png" alt="IMG_6407">
        </div>


    </div>
</div>


<button class="collapsible">Part 1.8: Visual Anagrams -- done</button>
<div class="content">
    <div class="box">
        <p>Here we want to create an image that looks like one prompt from one direction and a different prompt upside down.</p>
        <p>problem wants ...</p>
        <p>Correctly implemented `visual_anagrams` function ... good</p>
        <p>A visual anagram where on one orientation `"an oil painting of people around a campfire"` is displayed and, when flipped, `"an oil painting of an old man"` is displayed.</p>
        <div class="image-row">
            <img src="./partA/part1/1.8/1/normal.png" alt="IMG_6407">
            <img src="./partA/part1/1.8/1/other.png" alt="IMG_6407">
        </div>

        <p>here we have prompt1 = "a photo of a dog" and prompt2 = "a lithograph of waterfalls"</p>
        <div class="image-row">
            <img src="./partA/part1/1.8/2/normal.png" alt="IMG_6407">
            <img src="./partA/part1/1.8/2/other.png" alt="IMG_6407">
        </div>

        <p>here we have prompt1 = "a photo of a man" and prompt2 = "a lithograph of a skull"</p>
        <div class="image-row">
            <img src="./partA/part1/1.8/3/normal.png" alt="IMG_6407">
            <img src="./partA/part1/1.8/3/other.png" alt="IMG_6407">
        </div>

    </div>
</div>




<button class="collapsible">Part 1.10: Hybrid Images ... should be 1.9 I think they misnumbered it -- done</button>
<div class="content">
    <div class="box">
        <p>here we want to create a hybrid image that looks like one prompt from a close distance and another prompt from a far distance</p>
        <p>Note: for this the distances are pretty far apart for it to work as well based on just using the methods in this topic as the randomness makes it difficult to get correct, also really depends on the combos some work a lot better then others i.e. ones that share a similar object border</p>
        <p>for the deliverables they want ...</p>
        <p>Correctly implemented make_hybrids function ... done</p>
        <p>An image that looks like a skull from far away but a waterfall from close up</p>
        <div class="image-row">
            <img src="./partA/part1/1.10/1.png" alt="IMG_6407">
        </div>

        <p>1/2 more hybrid images of your choosing.</p>
        <p>prompt1 = 'a photo of a man' close AND prompt2 = 'a photo of a hipster barista' far</p>
        <div class="image-row">
            <img src="./partA/part1/1.10/2.png" alt="IMG_6407">
        </div>

        <p>2/2 more hybrid images of your choosing.</p>
        <p>prompt1 = 'an oil painting of an old man' close AND prompt2 = 'an oil painting of people around a campfire' far</p>
        <div class="image-row">
            <img src="./partA/part1/1.10/3.png" alt="IMG_6407">
        </div>

    </div>
</div>




<p>now onto part B of the project ... Diffusion Models from Scratch</p>
<p>In part B you will train your own diffusion model on MNIST.</p>





<button class="collapsible">Part 1: Deliverables -- done</button>
<div class="content">
    <div class="box">
        <p>Deliverable 1</p>
        <p> A visualization of the noising process using $\sigma=[0.0,0.2,0.4,0.5,0.6,0.8,1.0]$.</p>
        <div class="image-row">
            <img src="./partB/D1/1.png" alt="IMG_6407">
            <img src="./partB/D1/2.png" alt="IMG_6407">
            <img src="./partB/D1/3.png" alt="IMG_6407">
            <img src="./partB/D1/4.png" alt="IMG_6407">
            <img src="./partB/D1/5.png" alt="IMG_6407">
        </div>
    </div>

    <div class="box">
        <p>Deliverable 2</p>
        <p>A training loss curve plot every few iterations during the whole training process</p>
        <div class="image-row">
            <img src="./partB/D1/6.png" alt="IMG_6407">
        </div>
    </div>

    <div class="box">
        <p>Deliverable 3</p>
        <p>Sample results on the test set after the first and the 5-th epoch (staff solution takes ~7 minutes for 5 epochs on a Colab T4 GPU)</p>
        <p>Denoising results after 1 epoch:</p>
        <div class="image-row">
            <img src="./partB/D1/7.png" alt="IMG_6407">
        </div>
        <p>Denoising results after 5 epochs:</p>
        <div class="image-row">
            <img src="./partB/D1/8.png" alt="IMG_6407">
        </div>
    </div>


    <div class="box">
        <p>Deliverable 4</p>
        <p>Sample results on the test set with out-of-distribution noise levels after the model is trained. Keep the same image and vary $\sigma=[0.0,0.2,0.4,0.5,0.6,0.8,1.0]$.</p>
        <div class="image-row">
            <img src="./partB/D1/9.png" alt="IMG_6407">
        </div>
    </div>

</div>




<button class="collapsible">Part 2: Deliverables -- Group 1 -- done</button>
<div class="content">
    <div class="box">
        <p>Deliverable 1 -- P2</p>
        <p>A training loss curve plot for the time-conditioned UNet over the whole training process (figure 10).</p>
        <div class="image-row">
            <img src="./partB/D2/1.png" alt="IMG_6407">
        </div>
    </div>

    <div class="box">
        <p>Deliverable 2 -- P2</p>
        <p>Sampling results for the time-conditioned UNet for 5 and 20 epochs.</p>
        <p>Samples after 5 epochs:</p>
        <div class="image-row">
            <img src="./partB/D2/2.png" alt="IMG_6407">
        </div>
        <p>Samples after 20 epochs:</p>
        <div class="image-row">
            <img src="./partB/D2/3.png" alt="IMG_6407">
        </div>
    </div>
</div>

<button class="collapsible">Part 2: Deliverables -- Group 2 -- done</button>
<div class="content">
    <div class="box">
        <p>D1</p>
        <p>A training loss curve plot for the class-conditioned UNet over the whole training process.</p>
        <div class="image-row">
            <img src="./partB/D3/1.png" alt="IMG_6407">
        </div>
    </div>

    <div class="box">
        <p>D2</p>
        <p>Sampling results for the class-conditioned UNet for 5 and 20 epochs. Generate 4 instances of each digit as shown above.</p>
        <p>Class-Conditioned Samples after 5 epochs:</p>
        <div class="image-row">
            <img src="./partB/D3/2.png" alt="IMG_6407">
        </div>
        <p>Class-Conditioned Samples after 20 epochs:</p>
        <div class="image-row">
            <img src="./partB/D3/3.png" alt="IMG_6407">
        </div>
    </div>
</div>



<!--<button class="collapsible">???</button>-->
<!--<div class="content">-->
<!--    <div class="box">-->
<!--        <p>???</p>-->
<!--        <div class="image-row">-->
<!--            <img src=".." alt="IMG_6407">-->
<!--        </div>-->
<!--    </div>-->
<!--</div>-->






<script>
    var coll = document.getElementsByClassName("collapsible");
    var i;

    for (i = 0; i < coll.length; i++) {
        coll[i].addEventListener("click", function () {
            this.classList.toggle("active");
            var content = this.nextElementSibling;
            if (content.style.display === "block") {
                content.style.display = "none";
            } else {
                content.style.display = "block";
            }
        });
    }
</script>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const paragraphs = document.querySelectorAll("p");

        paragraphs.forEach(paragraph => {
            paragraph.innerHTML = paragraph.innerHTML.replace(/`([^`]+)`/g, function (match, p1) {
                return `<code>${p1}</code>`;
            });
        });
    });
</script>

<script>
    let container = document.getElementById('image-container');
    let img = document.getElementById('design-image');
    let isDragging = false;
    let startX, startY;
    let imgX = 0, imgY = 0;
    let scale = 1;

    container.addEventListener('mousedown', function(e) {
        isDragging = true;
        startX = e.clientX - imgX;
        startY = e.clientY - imgY;
    });
    container.addEventListener('mousemove', function(e) {
        if (isDragging) {
            imgX = e.clientX - startX;
            imgY = e.clientY - startY;
            img.style.transform = `translate(${imgX}px, ${imgY}px) scale(${scale})`;
        }
    });
    container.addEventListener('mouseup', function() {
        isDragging = false;
    });
    container.addEventListener('mouseleave', function() {
        isDragging = false;
    });

    container.addEventListener('wheel', function(e) {
        e.preventDefault();
        let rect = container.getBoundingClientRect();
        let offsetX = e.clientX - rect.left - imgX;
        let offsetY = e.clientY - rect.top - imgY;
        let delta = e.deltaY > 0 ? -0.1 : 0.1;
        let newScale = Math.min(Math.max(0.5, scale + delta), 5);

        imgX -= offsetX * (newScale - scale) / scale;
        imgY -= offsetY * (newScale - scale) / scale;

        scale = newScale;
        img.style.transform = `translate(${imgX}px, ${imgY}px) scale(${scale})`;
    });

    img.addEventListener('load', function() {
        let containerRect = container.getBoundingClientRect();
        let imgWidth = img.naturalWidth;
        let imgHeight = img.naturalHeight;

        let scaledWidth = imgWidth * scale;
        let scaledHeight = imgHeight * scale;

        imgX = (containerRect.width - scaledWidth) / 2;
        imgY = (containerRect.height - scaledHeight) / 2;

        img.style.transform = `translate(${imgX}px, ${imgY}px) scale(${scale})`;
    });
</script>

</body>
</html>
